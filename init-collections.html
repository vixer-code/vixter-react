<!DOCTYPE html>
<html>
<head>
    <title>Initialize RTDB Collections</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyABjJMmPTnCUegUtAFd9P8L-qf2_OY30xs",
            authDomain: "vixter-451b3.firebaseapp.com",
            databaseURL: "https://vixter-451b3.firebaseio.com/",
            projectId: "vixter-451b3",
            storageBucket: "vixter-451b3.firebasestorage.app",
            messagingSenderId: "429636386363",
            appId: "1:429636386363:web:7f2ac94bca7961ba70a61e",
            measurementId: "G-Z0FBX7E8RY"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        async function initializeCollections() {
            try {
                console.log('Initializing missing collections in new RTDB...');
                
                // Create empty conversations collection
                await set(ref(database, 'conversations'), {});
                console.log('‚úÖ conversations collection created');
                
                // Create empty messages collection
                await set(ref(database, 'messages'), {});
                console.log('‚úÖ messages collection created');
                
                console.log('üéâ All collections initialized successfully!');
                document.getElementById('status').innerHTML = '‚úÖ Collections created successfully! Your messaging page should now work.';
                
            } catch (error) {
                console.error('‚ùå Error initializing collections:', error);
                document.getElementById('status').innerHTML = '‚ùå Error: ' + error.message;
            }
        }

        // Auto-run when page loads
        window.addEventListener('load', initializeCollections);
    </script>
</head>
<body>
    <h1>Initialize RTDB Collections</h1>
    <p>This page will create the missing collections in your new RTDB instance.</p>
    <div id="status">Initializing...</div>
    <p>Check the console for detailed logs.</p>
</body>
</html>
